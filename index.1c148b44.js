const e=function(e){document.querySelector(".fox").className=`fox fox-${e}`},t=function(e){document.querySelector(".game").className=`game ${e}`},i=function(e){document.querySelector(".poop-bag").classList.toggle("hidden",!e)},s=function(e,t){e?document.querySelector(".modal").classList.remove("hidden"):document.querySelector(".modal").classList.add("hidden"),document.querySelector(".modal").innerHTML=`<div class="modal-inner">${t}</div>`},n=["fish","poop","weather"],h=["day","rain"],o=e=>Math.floor(3*Math.random())+5+e,r=e=>Math.floor(2*Math.random())+3+e,c=e=>Math.floor(3*Math.random())+4+e,a={current:"INIT",clock:1,wakeTime:-1,sleepTime:-1,hungryTime:-1,dieTime:-1,poopTime:-1,timeToStartCelebrating:-1,timeToEndCelebrating:-1,tick(){return this.clock++,console.log(this.clock,this.poopTime),this.clock===this.wakeTime?this.wake():this.clock===this.sleepTime?this.sleep():this.clock===this.hungryTime?this.getHungry():this.clock===this.timeToStartCelebrating?this.startCelebrating():this.clock===this.timeToEndCelebrating?this.endCelebrating():this.clock===this.poopTime?this.poop():this.clock===this.dieTime&&this.die(),this.clock},startGame(){this.current="HATCHING",this.wakeTime=this.clock+3,e("egg"),t(h[this.scene]),s(!1,"Press the middle button to play")},wake(){this.current="IDLING",this.wakeTime=-1,this.scene=Math.random()>.2?0:1,t(h[this.scene]),this.sleepTime=this.clock+60,this.hungryTime=o(this.clock),this.determineFoxState()},sleep(){this.current="SLEEP",e("sleep"),t("night"),this.clearTimes(),this.wakeTime=this.clock+4},getHungry(){this.current="HUNGRY",this.dieTime=r(this.clock),this.hungryTime=-1,e("hungry")},handleUserAction(e){if(["INIT","GAMEOVER","PAUSED"].includes(this.current)||"INIT"===this.current||"DEAD"===this.current){this.startGame();return}switch(e){case"weather":this.changeWeather();break;case"poop":this.cleanUpPoop();break;case"fish":this.feed()}},startCelebrating(){this.current="CELEBRATING",e("celebrate"),this.timeToStartCelebrating=-1,this.timeToEndCelebrating=this.clock+2},endCelebrating(){this.timeToEndCelebrating=-1,this.current="IDLING",this.determineFoxState(),i(!1)},determineFoxState(){"IDLING"===this.current&&("rain"===h[this.scene]?e("rain"):e("idling"))},poop(){this.current="POOPING",this.poopTime=-1,console.log("poop"),this.dieTime=r(this.clock),e("pooping")},die(){this.current="DEAD",e("dead"),t("dead"),this.clearTimes(),s(!0,"The fox died, press the middle button to start over")},changeWeather(){this.scene=(1+this.scene)%h.length,t(h[this.scene]),this.determineFoxState()},cleanUpPoop(){"POOPING"===this.current&&(this.dieTime=-1,i(!0),this.startCelebrating(),this.hungryTime=o(this.clock))},feed(){"HUNGRY"===this.current&&(this.current="FEEDING",this.dieTime=-1,this.poopTime=c(this.clock),e("eating"),this.timeToStartCelebrating=this.clock+2)},clearTimes(){this.wakeTime=-1,this.sleepTime=-1,this.hungryTime=-1,this.dieTime=-1,this.poopTime=-1,this.timeToStartCelebrating=-1,this.timeToEndCelebrating=-1}},l=a.handleUserAction.bind(a),m=(e,t)=>{document.querySelector(`.${n[e]}-icon`).classList.toggle("highlighted",t)};!async function(){let e;e=0,document.querySelector(".buttons").addEventListener("click",function({target:t}){t.classList.contains("left-btn")?(m(e,!1),m(e=(2+e)%n.length,!0)):t.classList.contains("right-btn")?(m(e,!1),m(e=(1+e)%n.length,!0)):l(n[e])});let t=Date.now();!function e(){let i=Date.now();t<=i&&(a.tick(),t=i+3e3),requestAnimationFrame(e)}()}();
//# sourceMappingURL=index.1c148b44.js.map
