{"mappings":"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","sources":["<anon>","src/init.js","src/gameState.js","src/ui.js","src/constants.js","src/buttons.js"],"sourcesContent":["const $c5609b19b69769b8$export$31edf49e44578506 = function modFox(state) {\n    document.querySelector(\".fox\").className = `fox fox-${state}`;\n};\nconst $c5609b19b69769b8$export$1f9518c2c59b8e99 = function modScene(state) {\n    document.querySelector(\".game\").className = `game ${state}`;\n};\nconst $c5609b19b69769b8$export$7ee9422b060e0e7b = function togglePoopBag(show) {\n    document.querySelector(\".poop-bag\").classList.toggle(\"hidden\", !show);\n};\nconst $c5609b19b69769b8$export$313c6d35f75fc0e = function toggleModal(show, text) {\n    show ? document.querySelector(\".modal\").classList.remove(\"hidden\") : document.querySelector(\".modal\").classList.add(\"hidden\");\n    document.querySelector(\".modal\").innerHTML = `<div class=\"modal-inner\">${text}</div>`;\n};\n\n\nconst $d31e157fce8f2b46$export$254fa44e74c824df = 3000;\nconst $d31e157fce8f2b46$export$fde44257752a9f60 = [\n    \"fish\",\n    \"poop\",\n    \"weather\"\n];\nconst $d31e157fce8f2b46$export$d109769b7b60b20b = 0.2;\nconst $d31e157fce8f2b46$export$d3112996f706f1c = [\n    \"day\",\n    \"rain\"\n];\nconst $d31e157fce8f2b46$export$6deaf3182f1c1b32 = 60;\nconst $d31e157fce8f2b46$export$d948a4fe06c2f359 = 4;\nconst $d31e157fce8f2b46$export$874062149b90e324 = \"Press the middle button to play\";\nconst $d31e157fce8f2b46$export$32afa3b039250fb3 = \"The fox died, press the middle button to start over\";\nconst $d31e157fce8f2b46$export$57d09a4d1c60d13c = (clock)=>Math.floor(Math.random() * 3) + 5 + clock;\nconst $d31e157fce8f2b46$export$90ecfaab96696ff = (clock)=>Math.floor(Math.random() * 2) + 3 + clock;\nconst $d31e157fce8f2b46$export$c0dfc64653b730bf = (clock)=>Math.floor(Math.random() * 3) + 4 + clock;\n\n\nconst $59d00dbc1d5a03bd$var$gameState = {\n    current: \"INIT\",\n    clock: 1,\n    wakeTime: -1,\n    sleepTime: -1,\n    hungryTime: -1,\n    dieTime: -1,\n    poopTime: -1,\n    timeToStartCelebrating: -1,\n    timeToEndCelebrating: -1,\n    tick () {\n        this.clock++;\n        console.log(this.clock, this.poopTime);\n        if (this.clock === this.wakeTime) this.wake();\n        else if (this.clock === this.sleepTime) this.sleep();\n        else if (this.clock === this.hungryTime) this.getHungry();\n        else if (this.clock === this.timeToStartCelebrating) this.startCelebrating();\n        else if (this.clock === this.timeToEndCelebrating) this.endCelebrating();\n        else if (this.clock === this.poopTime) this.poop();\n        else if (this.clock === this.dieTime) this.die();\n        return this.clock;\n    },\n    startGame () {\n        this.current = \"HATCHING\";\n        this.wakeTime = this.clock + 3;\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"egg\");\n        (0, $c5609b19b69769b8$export$1f9518c2c59b8e99)((0, $d31e157fce8f2b46$export$d3112996f706f1c)[this.scene]);\n        (0, $c5609b19b69769b8$export$313c6d35f75fc0e)(false, (0, $d31e157fce8f2b46$export$874062149b90e324));\n    },\n    wake () {\n        this.current = \"IDLING\";\n        this.wakeTime = -1;\n        this.scene = Math.random() > (0, $d31e157fce8f2b46$export$d109769b7b60b20b) ? 0 : 1;\n        (0, $c5609b19b69769b8$export$1f9518c2c59b8e99)((0, $d31e157fce8f2b46$export$d3112996f706f1c)[this.scene]);\n        this.sleepTime = this.clock + (0, $d31e157fce8f2b46$export$6deaf3182f1c1b32);\n        this.hungryTime = (0, $d31e157fce8f2b46$export$57d09a4d1c60d13c)(this.clock);\n        this.determineFoxState();\n    },\n    sleep () {\n        this.current = \"SLEEP\";\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"sleep\");\n        (0, $c5609b19b69769b8$export$1f9518c2c59b8e99)(\"night\");\n        this.clearTimes();\n        this.wakeTime = this.clock + (0, $d31e157fce8f2b46$export$d948a4fe06c2f359);\n    },\n    getHungry () {\n        this.current = \"HUNGRY\";\n        this.dieTime = (0, $d31e157fce8f2b46$export$90ecfaab96696ff)(this.clock);\n        this.hungryTime = -1;\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"hungry\");\n    },\n    handleUserAction (icon) {\n        if ([\n            \"INIT\",\n            \"GAMEOVER\",\n            \"PAUSED\"\n        ].includes(this.current)) {\n            this.startGame();\n            return;\n        }\n        if (this.current === \"INIT\" || this.current === \"DEAD\") {\n            this.startGame();\n            return;\n        }\n        switch(icon){\n            case \"weather\":\n                this.changeWeather();\n                break;\n            case \"poop\":\n                this.cleanUpPoop();\n                break;\n            case \"fish\":\n                this.feed();\n                break;\n        }\n    },\n    startCelebrating () {\n        this.current = \"CELEBRATING\";\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"celebrate\");\n        this.timeToStartCelebrating = -1;\n        this.timeToEndCelebrating = this.clock + 2;\n    },\n    endCelebrating () {\n        this.timeToEndCelebrating = -1;\n        this.current = \"IDLING\";\n        this.determineFoxState();\n        (0, $c5609b19b69769b8$export$7ee9422b060e0e7b)(false);\n    },\n    determineFoxState () {\n        if (this.current === \"IDLING\") {\n            if ((0, $d31e157fce8f2b46$export$d3112996f706f1c)[this.scene] === \"rain\") (0, $c5609b19b69769b8$export$31edf49e44578506)(\"rain\");\n            else (0, $c5609b19b69769b8$export$31edf49e44578506)(\"idling\");\n        }\n    },\n    poop () {\n        this.current = \"POOPING\";\n        this.poopTime = -1;\n        console.log(\"poop\");\n        this.dieTime = (0, $d31e157fce8f2b46$export$90ecfaab96696ff)(this.clock);\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"pooping\");\n    },\n    die () {\n        this.current = \"DEAD\";\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"dead\");\n        (0, $c5609b19b69769b8$export$1f9518c2c59b8e99)(\"dead\");\n        this.clearTimes();\n        (0, $c5609b19b69769b8$export$313c6d35f75fc0e)(true, (0, $d31e157fce8f2b46$export$32afa3b039250fb3));\n    },\n    changeWeather () {\n        this.scene = (1 + this.scene) % (0, $d31e157fce8f2b46$export$d3112996f706f1c).length;\n        (0, $c5609b19b69769b8$export$1f9518c2c59b8e99)((0, $d31e157fce8f2b46$export$d3112996f706f1c)[this.scene]);\n        this.determineFoxState();\n    },\n    cleanUpPoop () {\n        if (this.current !== \"POOPING\") return;\n        this.dieTime = -1;\n        (0, $c5609b19b69769b8$export$7ee9422b060e0e7b)(true);\n        this.startCelebrating();\n        this.hungryTime = (0, $d31e157fce8f2b46$export$57d09a4d1c60d13c)(this.clock);\n    },\n    feed () {\n        if (this.current !== \"HUNGRY\") return;\n        this.current = \"FEEDING\";\n        this.dieTime = -1;\n        this.poopTime = (0, $d31e157fce8f2b46$export$c0dfc64653b730bf)(this.clock);\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"eating\");\n        this.timeToStartCelebrating = this.clock + 2;\n    },\n    clearTimes () {\n        this.wakeTime = -1;\n        this.sleepTime = -1;\n        this.hungryTime = -1;\n        this.dieTime = -1;\n        this.poopTime = -1;\n        this.timeToStartCelebrating = -1;\n        this.timeToEndCelebrating = -1;\n    }\n};\nconst $59d00dbc1d5a03bd$export$ccab573699251c80 = $59d00dbc1d5a03bd$var$gameState.handleUserAction.bind($59d00dbc1d5a03bd$var$gameState);\nvar $59d00dbc1d5a03bd$export$2e2bcd8739ae039 = $59d00dbc1d5a03bd$var$gameState;\n\n\n\n\nconst $f99f8bc8eb4b45b2$var$toggleHighlighted = (icon, show)=>{\n    document.querySelector(`.${(0, $d31e157fce8f2b46$export$fde44257752a9f60)[icon]}-icon`).classList.toggle(\"highlighted\", show);\n};\nfunction $f99f8bc8eb4b45b2$export$2e2bcd8739ae039(handleUserAction) {\n    let selectedIcon = 0;\n    function buttonClick({ target: target }) {\n        if (target.classList.contains(\"left-btn\")) {\n            $f99f8bc8eb4b45b2$var$toggleHighlighted(selectedIcon, false);\n            selectedIcon = (2 + selectedIcon) % (0, $d31e157fce8f2b46$export$fde44257752a9f60).length;\n            $f99f8bc8eb4b45b2$var$toggleHighlighted(selectedIcon, true);\n        } else if (target.classList.contains(\"right-btn\")) {\n            $f99f8bc8eb4b45b2$var$toggleHighlighted(selectedIcon, false);\n            selectedIcon = (1 + selectedIcon) % (0, $d31e157fce8f2b46$export$fde44257752a9f60).length;\n            $f99f8bc8eb4b45b2$var$toggleHighlighted(selectedIcon, true);\n        } else handleUserAction((0, $d31e157fce8f2b46$export$fde44257752a9f60)[selectedIcon]);\n    }\n    document.querySelector(\".buttons\").addEventListener(\"click\", buttonClick);\n}\n\n\nasync function $dbe606d024410119$var$init() {\n    (0, $f99f8bc8eb4b45b2$export$2e2bcd8739ae039)((0, $59d00dbc1d5a03bd$export$ccab573699251c80));\n    let nextTimeToTick = Date.now();\n    function nextAnimationFrame() {\n        const now = Date.now();\n        if (nextTimeToTick <= now) {\n            (0, $59d00dbc1d5a03bd$export$2e2bcd8739ae039).tick();\n            nextTimeToTick = now + (0, $d31e157fce8f2b46$export$254fa44e74c824df);\n        }\n        requestAnimationFrame(nextAnimationFrame);\n    }\n    nextAnimationFrame();\n}\n$dbe606d024410119$var$init();\n\n\n//# sourceMappingURL=index.1c148b44.js.map\n","import game, { handleUserAction } from \"./gameState\";\nimport { TICK_RATE } from \"./constants\";\nimport initButtons from \"./buttons\";\n\nasync function init() {\n  initButtons(handleUserAction);\n  let nextTimeToTick = Date.now();\n\n  function nextAnimationFrame() {\n    const now = Date.now();\n\n    if (nextTimeToTick <= now) {\n      game.tick();\n      nextTimeToTick = now + TICK_RATE;\n    }\n\n    requestAnimationFrame(nextAnimationFrame);\n  }\n\n  nextAnimationFrame();\n}\n\ninit();\n","import { modFox, modScene, toggleModal, togglePoopBag } from \"./ui\";\nimport {\n  RAIN_CHANCE,\n  SCENES,\n  DAY_LENGTH,\n  NIGHT_LENGTH,\n  getNextHungerTime,\n  getNextDieTime,\n  getNextPoopTime,\n  START_TEXT,\n  DEAD_TEXT,\n} from \"./constants\";\n\nconst gameState = {\n  current: \"INIT\",\n  clock: 1,\n  wakeTime: -1,\n  sleepTime: -1,\n  hungryTime: -1,\n  dieTime: -1,\n  poopTime: -1,\n  timeToStartCelebrating: -1,\n  timeToEndCelebrating: -1,\n  tick() {\n    this.clock++;\n    console.log(this.clock, this.poopTime);\n    if (this.clock === this.wakeTime) {\n      this.wake();\n    } else if (this.clock === this.sleepTime) {\n      this.sleep();\n    } else if (this.clock === this.hungryTime) {\n      this.getHungry();\n    } else if (this.clock === this.timeToStartCelebrating) {\n      this.startCelebrating();\n    } else if (this.clock === this.timeToEndCelebrating) {\n      this.endCelebrating();\n    } else if (this.clock === this.poopTime) {\n      this.poop();\n    } else if (this.clock === this.dieTime) {\n      this.die();\n    }\n\n    return this.clock;\n  },\n  startGame() {\n    this.current = \"HATCHING\";\n    this.wakeTime = this.clock + 3;\n    modFox(\"egg\");\n    modScene(SCENES[this.scene]);\n    toggleModal(false, START_TEXT);\n  },\n  wake() {\n    this.current = \"IDLING\";\n    this.wakeTime = -1;\n    this.scene = Math.random() > RAIN_CHANCE ? 0 : 1;\n    modScene(SCENES[this.scene]);\n    this.sleepTime = this.clock + DAY_LENGTH;\n    this.hungryTime = getNextHungerTime(this.clock);\n\n    this.determineFoxState();\n  },\n  sleep() {\n    this.current = \"SLEEP\";\n    modFox(\"sleep\");\n    modScene(\"night\");\n    this.clearTimes();\n    this.wakeTime = this.clock + NIGHT_LENGTH;\n  },\n  getHungry() {\n    this.current = \"HUNGRY\";\n    this.dieTime = getNextDieTime(this.clock);\n    this.hungryTime = -1;\n    modFox(\"hungry\");\n  },\n  handleUserAction(icon) {\n    if ([\"INIT\", \"GAMEOVER\", \"PAUSED\"].includes(this.current)) {\n      this.startGame();\n      return;\n    }\n\n    if (this.current === \"INIT\" || this.current === \"DEAD\") {\n      this.startGame();\n      return;\n    }\n    switch (icon) {\n      case \"weather\":\n        this.changeWeather();\n        break;\n      case \"poop\":\n        this.cleanUpPoop();\n        break;\n      case \"fish\":\n        this.feed();\n        break;\n    }\n  },\n  startCelebrating() {\n    this.current = \"CELEBRATING\";\n    modFox(\"celebrate\");\n    this.timeToStartCelebrating = -1;\n    this.timeToEndCelebrating = this.clock + 2;\n  },\n  endCelebrating() {\n    this.timeToEndCelebrating = -1;\n    this.current = \"IDLING\";\n    this.determineFoxState();\n    togglePoopBag(false);\n  },\n  determineFoxState() {\n    if (this.current === \"IDLING\") {\n      if (SCENES[this.scene] === \"rain\") {\n        modFox(\"rain\");\n      } else {\n        modFox(\"idling\");\n      }\n    }\n  },\n  poop() {\n    this.current = \"POOPING\";\n    this.poopTime = -1;\n    console.log(\"poop\");\n    this.dieTime = getNextDieTime(this.clock);\n    modFox(\"pooping\");\n  },\n  die() {\n    this.current = \"DEAD\";\n    modFox(\"dead\");\n    modScene(\"dead\");\n    this.clearTimes();\n    toggleModal(true, DEAD_TEXT);\n  },\n  changeWeather() {\n    this.scene = (1 + this.scene) % SCENES.length;\n    modScene(SCENES[this.scene]);\n    this.determineFoxState();\n  },\n  cleanUpPoop() {\n    if (this.current !== \"POOPING\") return;\n    this.dieTime = -1;\n    togglePoopBag(true);\n    this.startCelebrating();\n    this.hungryTime = getNextHungerTime(this.clock);\n  },\n  feed() {\n    if (this.current !== \"HUNGRY\") return;\n\n    this.current = \"FEEDING\";\n    this.dieTime = -1;\n    this.poopTime = getNextPoopTime(this.clock);\n    modFox(\"eating\");\n    this.timeToStartCelebrating = this.clock + 2;\n  },\n  clearTimes() {\n    this.wakeTime = -1;\n    this.sleepTime = -1;\n    this.hungryTime = -1;\n    this.dieTime = -1;\n    this.poopTime = -1;\n    this.timeToStartCelebrating = -1;\n    this.timeToEndCelebrating = -1;\n  },\n};\n\nexport const handleUserAction = gameState.handleUserAction.bind(gameState);\nexport default gameState;\n","export const modFox = function modFox(state) {\n  document.querySelector(\".fox\").className = `fox fox-${state}`;\n};\n\nexport const modScene = function modScene(state) {\n  document.querySelector(\".game\").className = `game ${state}`;\n};\n\nexport const togglePoopBag = function togglePoopBag(show) {\n  document.querySelector(\".poop-bag\").classList.toggle(\"hidden\", !show);\n};\nexport const toggleModal = function toggleModal(show, text) {\n  show\n    ? document.querySelector(\".modal\").classList.remove(\"hidden\")\n    : document.querySelector(\".modal\").classList.add(\"hidden\");\n\n  document.querySelector(\".modal\").innerHTML =\n    `<div class=\"modal-inner\">${text}</div>`;\n};\n","export const TICK_RATE = 3000;\nexport const ICONS = [\"fish\", \"poop\", \"weather\"];\nexport const RAIN_CHANCE = 0.2;\nexport const SCENES = [\"day\", \"rain\"];\nexport const DAY_LENGTH = 60;\nexport const NIGHT_LENGTH = 4;\nexport const START_TEXT = \"Press the middle button to play\";\nexport const DEAD_TEXT = \"The fox died, press the middle button to start over\";\n\nexport const getNextHungerTime = (clock) =>\n  Math.floor(Math.random() * 3) + 5 + clock;\nexport const getNextDieTime = (clock) =>\n  Math.floor(Math.random() * 2) + 3 + clock;\nexport const getNextPoopTime = (clock) =>\n  Math.floor(Math.random() * 3) + 4 + clock;\n","import { ICONS } from \"./constants.js\";\n\nconst toggleHighlighted = (icon, show) => {\n  document\n    .querySelector(`.${ICONS[icon]}-icon`)\n    .classList.toggle(\"highlighted\", show);\n};\n\nexport default function initButtons(handleUserAction) {\n  let selectedIcon = 0;\n\n  function buttonClick({ target }) {\n    if (target.classList.contains(\"left-btn\")) {\n      toggleHighlighted(selectedIcon, false);\n      selectedIcon = (2 + selectedIcon) % ICONS.length;\n      toggleHighlighted(selectedIcon, true);\n    } else if (target.classList.contains(\"right-btn\")) {\n      toggleHighlighted(selectedIcon, false);\n      selectedIcon = (1 + selectedIcon) % ICONS.length;\n      toggleHighlighted(selectedIcon, true);\n    } else {\n      handleUserAction(ICONS[selectedIcon]);\n    }\n  }\n\n  document.querySelector(\".buttons\").addEventListener(\"click\", buttonClick);\n}\n"],"names":["$c5609b19b69769b8$export$31edf49e44578506","state","document","querySelector","className","$c5609b19b69769b8$export$1f9518c2c59b8e99","$c5609b19b69769b8$export$7ee9422b060e0e7b","show","classList","toggle","$c5609b19b69769b8$export$313c6d35f75fc0e","text","remove","add","innerHTML","$d31e157fce8f2b46$export$fde44257752a9f60","$d31e157fce8f2b46$export$d3112996f706f1c","$d31e157fce8f2b46$export$57d09a4d1c60d13c","clock","Math","floor","random","$d31e157fce8f2b46$export$90ecfaab96696ff","$d31e157fce8f2b46$export$c0dfc64653b730bf","$59d00dbc1d5a03bd$var$gameState","current","wakeTime","sleepTime","hungryTime","dieTime","poopTime","timeToStartCelebrating","timeToEndCelebrating","tick","console","log","wake","sleep","getHungry","startCelebrating","endCelebrating","poop","die","startGame","scene","determineFoxState","clearTimes","handleUserAction","icon","includes","changeWeather","cleanUpPoop","feed","length","$59d00dbc1d5a03bd$export$ccab573699251c80","bind","$f99f8bc8eb4b45b2$var$toggleHighlighted","$dbe606d024410119$var$init","selectedIcon","addEventListener","target","contains","nextTimeToTick","Date","now","nextAnimationFrame","requestAnimationFrame"],"version":3,"file":"index.1c148b44.js.map"}